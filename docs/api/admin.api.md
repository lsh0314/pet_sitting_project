# ğŸ–¥ï¸ ç®¡ç†åå°æ¨¡å— API æ¥å£æ–‡æ¡£

> æ‰€æœ‰æ¥å£å‡éœ€è¦ç®¡ç†å‘˜èº«ä»½ç™»å½•ï¼Œå¹¶æºå¸¦åå°ä¸“ç”¨ token è¿›è¡Œè®¤è¯ã€‚

---

## âœ… 1. ç®¡ç†å‘˜ç™»å½•

- **æ¥å£è·¯å¾„**ï¼š`POST /api/admin/login`
- **è¯·æ±‚æ–¹æ³•**ï¼šPOST  
- **æè¿°**ï¼šç®¡ç†å‘˜åå°è´¦å·ç™»å½•

### è¯·æ±‚å‚æ•°

| å‚æ•°å   | ç±»å‹   | å¿…å¡« | æè¿°         |
| -------- | ------ | ---- | ------------ |
| username | string | æ˜¯   | ç®¡ç†å‘˜ç”¨æˆ·å |
| password | string | æ˜¯   | ç®¡ç†å‘˜å¯†ç    |

### å“åº”ç¤ºä¾‹

```json
{
  "token": "ADMIN_JWT_TOKEN",
  "user": {
    "id": 1,
    "username": "admin",
    "role": "super_admin"
  }
}
```

------

## âœ… 2. è·å–å¹³å°æ•°æ®çœ‹æ¿

- **æ¥å£è·¯å¾„**ï¼š`GET /api/admin/dashboard`
- **è¯·æ±‚æ–¹æ³•**ï¼šGET
- **æè¿°**ï¼šè·å–æ ¸å¿ƒä¸šåŠ¡æ•°æ®æŒ‡æ ‡

### å“åº”ç¤ºä¾‹

```json
{
  "totalUsers": 1582,
  "totalOrders": 987,
  "gmv": 82340,
  "todayOrders": 16,
  "pendingWithdrawals": 3,
  "pendingReviews": 4
}
```

------

## âœ… 3. ç”¨æˆ·ç®¡ç† - è·å–ç”¨æˆ·åˆ—è¡¨

- **æ¥å£è·¯å¾„**ï¼š`GET /api/admin/users`
- **è¯·æ±‚æ–¹æ³•**ï¼šGET
- **æè¿°**ï¼šæŸ¥çœ‹æ‰€æœ‰ç”¨æˆ·åŸºæœ¬ä¿¡æ¯

### æŸ¥è¯¢å‚æ•°ï¼ˆå¯é€‰ï¼‰

| å‚æ•°å | ç±»å‹   | æè¿°               |
| ------ | ------ | ------------------ |
| role   | string | pet_owner / sitter |
| status | string | active / banned    |
| page   | number | åˆ†é¡µé¡µç            |

### å“åº”ç¤ºä¾‹

```json
[
  {
    "id": 101,
    "nickname": "è±†è±†å¦ˆ",
    "role": "pet_owner",
    "createdAt": "2025-04-01",
    "status": "active"
  },
  ...
]
```

---

## âœ… 4. è®¢å•ç®¡ç† - è·å–è®¢å•åˆ—è¡¨

- **æ¥å£è·¯å¾„**ï¼š`GET /api/admin/orders`
- **è¯·æ±‚æ–¹æ³•**ï¼šGET  
- **æè¿°**ï¼šç®¡ç†å‘˜åå°æŸ¥çœ‹å…¨å¹³å°è®¢å•æ€»è§ˆï¼ˆç”¨äºç­›æŸ¥å¼‚å¸¸ã€æ•°æ®ç»Ÿè®¡ç­‰ï¼‰

### æŸ¥è¯¢å‚æ•°ï¼ˆå¯é€‰ï¼‰

| å‚æ•°å   | ç±»å‹   | æè¿°                                   |
| -------- | ------ | -------------------------------------- |
| status   | string | è®¢å•çŠ¶æ€ç­›é€‰ï¼ˆpending/paid/ongoingç­‰ï¼‰ |
| sitterId | number | æŒ‡å®šå¸®æºœå‘˜çš„ ID                        |
| ownerId  | number | æŒ‡å®šå® ç‰©ä¸»çš„ ID                        |
| dateFrom | string | èµ·å§‹æ—¥æœŸï¼ˆYYYY-MM-DDï¼‰                 |
| dateTo   | string | æˆªæ­¢æ—¥æœŸ                               |
| page     | number | é¡µç ï¼ˆé»˜è®¤ 1ï¼‰                         |
| size     | number | æ¯é¡µæ¡æ•°ï¼ˆé»˜è®¤ 10ï¼‰                    |

### å“åº”ç¤ºä¾‹

```json
[
  {
    "orderId": 456,
    "petName": "è±†è±†",
    "owner": { "id": 12, "nickname": "è±†è±†å¦ˆ" },
    "sitter": { "id": 88, "nickname": "å°æºœ" },
    "serviceType": "walk",
    "serviceDate": "2025-06-15",
    "status": "completed",
    "price": 60
  },
  ...
]
```

## âœ… 4aè®¢å•ç®¡ç† - æŸ¥çœ‹è®¢å•è¯¦æƒ…

- **æ¥å£è·¯å¾„**ï¼š`GET /api/admin/orders/:id`
- **è¯·æ±‚æ–¹æ³•**ï¼šGET
- **æè¿°**ï¼šæŸ¥çœ‹æŸä¸€ç¬”è®¢å•çš„å®Œæ•´è¯¦æƒ…ï¼ŒåŒ…æ‹¬ç”¨æˆ·ã€æœåŠ¡æŠ¥å‘Šã€è½¨è¿¹ã€èŠå¤©è®°å½•ç­‰

### å“åº”ç¤ºä¾‹

```json
{
  "orderId": 456,
  "status": "completed",
  "pet": {
    "id": 10,
    "name": "è±†è±†",
    "breed": "æŸ¯åŸº"
  },
  "owner": {
    "id": 12,
    "nickname": "è±†è±†å¦ˆ"
  },
  "sitter": {
    "id": 88,
    "nickname": "å°æºœ"
  },
  "serviceType": "walk",
  "serviceDate": "2025-06-15",
  "timeRange": "09:00-10:00",
  "address": "ä¸Šæµ·å¸‚é»„æµ¦åŒºÃ—Ã—å°åŒº",
  "report": [
    {
      "text": "è±†è±†ä»Šå¤©ç‰¹åˆ«æ´»æ³¼",
      "images": ["https://cdn.com/img1.jpg"],
      "timestamp": "2025-06-15T09:30:00Z"
    }
  ],
  "track": [
    { "lat": 31.234, "lng": 121.489, "time": "2025-06-15T09:10:00Z" },
    { "lat": 31.236, "lng": 121.491, "time": "2025-06-15T09:20:00Z" }
  ],
  "payment": {
    "amount": 60,
    "paid": true,
    "commission": 6,
    "sitterIncome": 54
  }
}
```

---

## âœ… 4b. è®¢å•ç®¡ç† - æ‰§è¡Œé€€æ¬¾

- **æ¥å£è·¯å¾„**ï¼š`POST /api/admin/orders/:id/refund`
- **è¯·æ±‚æ–¹æ³•**ï¼šPOST
- **æè¿°**ï¼šç®¡ç†å‘˜ä¸ºæŒ‡å®šè®¢å•æ‰§è¡Œé€€æ¬¾æ“ä½œï¼Œç”¨äºå¤„ç†çº çº·æˆ–å…¶å®ƒç‰¹æ®Šæƒ…å†µã€‚

### è¯·æ±‚å‚æ•°
| å‚æ•°å | ç±»å‹   | å¿…å¡« | æè¿°               |
| ------ | ------ | ---- | ------------------ |
| amount | number | æ˜¯   | é€€æ¬¾é‡‘é¢           |
| reason | string | æ˜¯   | é€€æ¬¾åŸå› ï¼Œç”¨äºè®°å½• |

### å“åº”ç¤ºä¾‹
```json
{
  "success": true,
  "message": "é€€æ¬¾æ“ä½œå·²æ‰§è¡Œ"
}
```

---

## âœ… 5. ç”¨æˆ·å°ç¦ / è§£å°

- **æ¥å£è·¯å¾„**ï¼š`POST /api/admin/users/:id/status`
- **è¯·æ±‚æ–¹æ³•**ï¼šPOST
- **æè¿°**ï¼šä¿®æ”¹ç”¨æˆ·çŠ¶æ€ï¼ˆå°ç¦ / è§£å°ï¼‰

### è¯·æ±‚å‚æ•°

| å‚æ•°å | ç±»å‹   | å¿…å¡« | æè¿°             |
| ------ | ------ | ---- | ---------------- |
| status | string | æ˜¯   | active / banned  |
| reason | string | å¦   | å°ç¦ç†ç”±ï¼ˆå¯é€‰ï¼‰ |

------

## âœ… 6. è®¤è¯å®¡æ ¸ - è·å–å¾…å®¡æ ¸åˆ—è¡¨

- **æ¥å£è·¯å¾„**ï¼š`GET /api/admin/verifications`
- **è¯·æ±‚æ–¹æ³•**ï¼šGET
- **æè¿°**ï¼šè·å–æ‰€æœ‰å®åè®¤è¯æˆ–è¯ä¹¦è®¤è¯çš„å¾…å®¡æ ¸é¡¹

### å“åº”ç¤ºä¾‹

```json
[
  {
    "userId": 88,
    "nickname": "æºœæºœå°èƒ½æ‰‹",
    "type": "identity", // identity / certificate
    "submittedAt": "2025-06-08T12:00:00Z"
  }
]
```

------

## âœ… 7. å®¡æ ¸é€šè¿‡ / é©³å›

- **æ¥å£è·¯å¾„**ï¼š`POST /api/admin/verifications/:userId`
- **è¯·æ±‚æ–¹æ³•**ï¼šPOST
- **æè¿°**ï¼šå¤„ç†æŸä¸ªå¸®æºœå‘˜çš„å®åè®¤è¯å®¡æ ¸ç»“æœ

### è¯·æ±‚å‚æ•°

| å‚æ•°å  | ç±»å‹   | å¿…å¡« | æè¿°                |
| ------- | ------ | ---- | ------------------- |
| result  | string | æ˜¯   | approved / rejected |
| comment | string | å¦   | é©³å›åŸå› ï¼ˆè‹¥æ‹’ç»ï¼‰  |

------

## âœ… 8. æç°å®¡æ ¸

- **æ¥å£è·¯å¾„**ï¼š`GET /api/admin/withdrawals`
- **è¯·æ±‚æ–¹æ³•**ï¼šGET
- **æè¿°**ï¼šè·å–æ‰€æœ‰å¾…å¤„ç†æç°ç”³è¯·

### å“åº”ç¤ºä¾‹

```json
[
  {
    "id": 32,
    "userId": 88,
    "amount": 150,
    "method": "wechat",
    "status": "processing",
    "requestedAt": "2025-06-09T14:00:00Z"
  }
]
```

------

## âœ… 9. å®¡æ ¸æç°ç”³è¯·

- **æ¥å£è·¯å¾„**ï¼š`POST /api/admin/withdrawals/:id`
- **è¯·æ±‚æ–¹æ³•**ï¼šPOST
- **æè¿°**ï¼šç®¡ç†å‘˜å®¡æ‰¹æç°ç”³è¯·

### è¯·æ±‚å‚æ•°

| å‚æ•°å  | ç±»å‹   | æè¿°                     |
| ------- | ------ | ------------------------ |
| result  | string | approved / rejected      |
| comment | string | å¤‡æ³¨è¯´æ˜ï¼ˆç”¨äºé€šçŸ¥ç”¨æˆ·ï¼‰ |

------

## âœ… 10. æŠ•è¯‰ç®¡ç† - è·å–å…¨éƒ¨ç”³è¯‰å·¥å•

- **æ¥å£è·¯å¾„**ï¼š`GET /api/admin/complaints`
- **è¯·æ±‚æ–¹æ³•**ï¼šGET
- **æè¿°**ï¼šæŸ¥çœ‹æ‰€æœ‰ç”¨æˆ·æäº¤çš„å”®å/çº çº·è®°å½•

------

## âœ… 11. æŠ•è¯‰è¯¦æƒ… + èŠå¤©è®°å½•è°ƒå–

- **æ¥å£è·¯å¾„**ï¼š`GET /api/admin/complaints/:id`
- **è¯·æ±‚æ–¹æ³•**ï¼šGET
- **æè¿°**ï¼šæŸ¥çœ‹å•ä¸ªç”³è¯‰å·¥å•è¯¦ç»†å†…å®¹ï¼ŒåŒ…æ‹¬è®¢å•ã€ç”¨æˆ·ã€è¯æ®ã€èŠå¤©è®°å½•ç­‰

------

## âœ… 12. å†…å®¹ç®¡ç† - è·å–è¯„ä»·åˆ—è¡¨

- **æ¥å£è·¯å¾„**ï¼š`GET /api/admin/reviews`
- **è¯·æ±‚æ–¹æ³•**ï¼šGET
- **æè¿°**ï¼šåå°æŸ¥çœ‹æ‰€æœ‰ç”¨æˆ·å‘å¸ƒçš„è¯„ä»·å†…å®¹

------

## âœ… 13. å†…å®¹å®¡æ ¸ï¼ˆéšè—/æ¢å¤è¯„ä»·ï¼‰

- **æ¥å£è·¯å¾„**ï¼š`POST /api/admin/reviews/:id/moderate`
- **è¯·æ±‚æ–¹æ³•**ï¼šPOST
- **æè¿°**ï¼šéšè—/æ¢å¤ç”¨æˆ·è¯„ä»·å†…å®¹ï¼ˆå¦‚å«æ•æ„Ÿè¯ï¼‰

### è¯·æ±‚å‚æ•°

| å‚æ•°å | ç±»å‹   | å¿…å¡« | æè¿°         |
| ------ | ------ | ---- | ------------ |
| action | string | æ˜¯   | hide / show  |
| reason | string | å¦   | è¯´æ˜éšè—åŸå›  |

------

## âœ… 14. ä¿®æ”¹å¹³å°é…ç½®ï¼ˆå¦‚ä½£é‡‘æ¯”ä¾‹ï¼‰

- **æ¥å£è·¯å¾„**ï¼š`POST /api/admin/config`
- **è¯·æ±‚æ–¹æ³•**ï¼šPOST
- **æè¿°**ï¼šä¿®æ”¹å¹³å°é…ç½®å‚æ•°ï¼Œå¦‚æœåŠ¡ç±»ç›®ã€ä½£é‡‘æ¯”ä¾‹ç­‰

### è¯·æ±‚å‚æ•°ï¼ˆç¤ºä¾‹ï¼‰

```json
{
  "commissionRate": 0.1,  // å¹³å°æŠ½æˆ 10%
  "minWithdrawal": 50
}
```

------

## âœ… é”™è¯¯è¿”å›ç¤ºä¾‹

```json
{
  "success": false,
  "errorCode": "UNAUTHORIZED",
  "message": "ç®¡ç†å‘˜æƒé™ä¸è¶³"
}
```

è¿™ä»½æ–‡æ¡£æ¶µç›–äº†ç®¡ç†å‘˜åå°æ ¸å¿ƒåŠŸèƒ½ï¼š

- âœ… ç”¨æˆ·ç®¡ç†ï¼ˆæŸ¥æ‰¾ã€å°ç¦ã€èº«ä»½å®¡æ ¸ï¼‰  
- âœ… è®¢å•/ç”³è¯‰/æç° å®¡æ ¸æµç¨‹  
- âœ… å†…å®¹æ§åˆ¶ä¸ç³»ç»Ÿé…ç½®  

---